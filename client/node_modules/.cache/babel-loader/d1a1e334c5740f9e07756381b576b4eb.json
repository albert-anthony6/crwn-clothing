{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\19012\\\\Desktop\\\\PortfolioProjects\\\\crwn-clothing\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nvar _jsxFileName = \"C:\\\\Users\\\\19012\\\\Desktop\\\\PortfolioProjects\\\\crwn-clothing\\\\src\\\\App.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from 'react';\nimport './App.css';\nimport { Switch, Route } from 'react-router-dom';\nimport HomePage from './pages/homepage/HomePage';\nimport ShopPage from './pages/shoppage/ShopPage';\nimport SignInAndSignUp from './pages/sign-in-and-sign-up/SignInAndSignUp';\nimport Header from './components/header/Header';\nimport { auth, createUserProfileDocument } from './firebase/firebase.utils';\n\nclass App extends React.Component {\n  constructor() {\n    super();\n    this.unsubscribeFromAuth = null;\n    this.state = {\n      currentUser: null\n    };\n  }\n\n  componentDidMount() {\n    this.unsubscribeFromAuth = auth.onAuthStateChanged(async user => {\n      const userRef = firestore.doc(\"users/\".concat(userAuth.uid));\n      const snapShot = await userRef.get();\n\n      if (!snapShot.exists) {\n        const _userAuth = userAuth,\n              displayName = _userAuth.displayName,\n              email = _userAuth.email;\n        const createdAt = new Date();\n\n        try {\n          await userRef.set(_objectSpread({\n            displayName,\n            email,\n            createdAt\n          }, additionalData));\n        } catch (error) {\n          console.log('error creating user', error.message);\n        }\n      }\n\n      return userRef;\n    });\n  }\n\n  componentWillUnmount() {\n    this.unsubscribeFromAuth();\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    }, React.createElement(Header, {\n      currentUser: this.state.currentUser,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54\n      },\n      __self: this\n    }), React.createElement(Switch, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    }, React.createElement(Route, {\n      exact: true,\n      path: \"/\",\n      component: HomePage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/shop\",\n      component: ShopPage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }), React.createElement(Route, {\n      path: \"/signin\",\n      component: SignInAndSignUp,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["C:/Users/19012/Desktop/PortfolioProjects/crwn-clothing/src/App.js"],"names":["React","Switch","Route","HomePage","ShopPage","SignInAndSignUp","Header","auth","createUserProfileDocument","App","Component","constructor","unsubscribeFromAuth","state","currentUser","componentDidMount","onAuthStateChanged","user","userRef","firestore","doc","userAuth","uid","snapShot","get","exists","displayName","email","createdAt","Date","set","additionalData","error","console","log","message","componentWillUnmount","render"],"mappings":";;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,WAAP;AACA,SAAQC,MAAR,EAAgBC,KAAhB,QAA4B,kBAA5B;AAEA,OAAOC,QAAP,MAAqB,2BAArB;AACA,OAAOC,QAAP,MAAqB,2BAArB;AACA,OAAOC,eAAP,MAA4B,6CAA5B;AACA,OAAOC,MAAP,MAAmB,4BAAnB;AACA,SAAQC,IAAR,EAAcC,yBAAd,QAA8C,2BAA9C;;AAEA,MAAMC,GAAN,SAAkBT,KAAK,CAACU,SAAxB,CAAiC;AAC/BC,EAAAA,WAAW,GAAE;AACX;AADW,SAObC,mBAPa,GAOS,IAPT;AAEX,SAAKC,KAAL,GAAa;AACXC,MAAAA,WAAW,EAAE;AADF,KAAb;AAGD;;AAIDC,EAAAA,iBAAiB,GAAE;AACjB,SAAKH,mBAAL,GAA2BL,IAAI,CAACS,kBAAL,CAAwB,MAAMC,IAAN,IAAc;AAE/D,YAAMC,OAAO,GAAGC,SAAS,CAACC,GAAV,iBAAuBC,QAAQ,CAACC,GAAhC,EAAhB;AACA,YAAMC,QAAQ,GAAG,MAAML,OAAO,CAACM,GAAR,EAAvB;;AAEA,UAAG,CAACD,QAAQ,CAACE,MAAb,EAAoB;AAAA,0BACWJ,QADX;AAAA,cACXK,WADW,aACXA,WADW;AAAA,cACEC,KADF,aACEA,KADF;AAElB,cAAMC,SAAS,GAAG,IAAIC,IAAJ,EAAlB;;AAEA,YAAG;AACD,gBAAMX,OAAO,CAACY,GAAR;AACJJ,YAAAA,WADI;AAEJC,YAAAA,KAFI;AAGJC,YAAAA;AAHI,aAIDG,cAJC,EAAN;AAMD,SAPD,CAOE,OAAMC,KAAN,EAAY;AACZC,UAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ,EAAmCF,KAAK,CAACG,OAAzC;AACD;AACF;;AAED,aAAOjB,OAAP;AACD,KAtB0B,CAA3B;AAuBD;;AAEDkB,EAAAA,oBAAoB,GAAE;AACpB,SAAKxB,mBAAL;AACD;;AAEDyB,EAAAA,MAAM,GAAE;AACN,WACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,oBAAC,MAAD;AAAQ,MAAA,WAAW,EAAE,KAAKxB,KAAL,CAAWC,WAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,EAEE,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACI,oBAAC,KAAD;AAAO,MAAA,KAAK,MAAZ;AAAa,MAAA,IAAI,EAAC,GAAlB;AAAsB,MAAA,SAAS,EAAEX,QAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,EAEI,oBAAC,KAAD;AAAO,MAAA,IAAI,EAAC,OAAZ;AAAoB,MAAA,SAAS,EAAEC,QAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFJ,EAGI,oBAAC,KAAD;AAAO,MAAA,IAAI,EAAC,SAAZ;AAAsB,MAAA,SAAS,EAAEC,eAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHJ,CAFF,CADF;AAUD;;AAnD8B;;AAsDjC,eAAeI,GAAf","sourcesContent":["import React from 'react';\nimport './App.css';\nimport {Switch, Route} from 'react-router-dom';\n\nimport HomePage from './pages/homepage/HomePage';\nimport ShopPage from './pages/shoppage/ShopPage';\nimport SignInAndSignUp from './pages/sign-in-and-sign-up/SignInAndSignUp';\nimport Header from './components/header/Header';\nimport {auth, createUserProfileDocument} from './firebase/firebase.utils';\n\nclass App extends React.Component{\n  constructor(){\n    super();\n    this.state = {\n      currentUser: null\n    };\n  }\n\n  unsubscribeFromAuth = null;\n\n  componentDidMount(){\n    this.unsubscribeFromAuth = auth.onAuthStateChanged(async user => {\n      \n      const userRef = firestore.doc(`users/${userAuth.uid}`);\n      const snapShot = await userRef.get();\n\n      if(!snapShot.exists){\n        const {displayName, email} = userAuth;\n        const createdAt = new Date();\n\n        try{\n          await userRef.set({\n            displayName,\n            email,\n            createdAt,\n            ...additionalData\n          })\n        } catch(error){\n          console.log('error creating user', error.message);\n        }\n      }\n\n      return userRef;\n    });\n  }\n\n  componentWillUnmount(){\n    this.unsubscribeFromAuth();\n  }\n\n  render(){\n    return(\n      <div>\n        <Header currentUser={this.state.currentUser}/>\n        <Switch>\n            <Route exact path=\"/\" component={HomePage}/>\n            <Route path=\"/shop\" component={ShopPage}/>\n            <Route path=\"/signin\" component={SignInAndSignUp}/>\n        </Switch>\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}